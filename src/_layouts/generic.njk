{% set cssComponents = merge(cssComponents, ['toc', 'meta']) %}

{% extends 'src/_layouts/layout.njk' %}

{% block main %}
  <div class="kimWrapper">
    <article class="pageGeneric">
      <header class="pageGeneric_header">
      
        {%- if date or updated %}
        <dl class="kimMeta">
          {%- if date %}
            <div class="kimMeta_item">
              <dt class="kimMeta_key kim-!-visually-hidden">Published</dt>
              <dd class="kimMeta_value">
                <time datetime="{{ date | formatDate('iso') }}" itemprop="dateCreated">
                  {{- date | formatDate('human') -}}
                </time>
              </dd>
            </div>
          {%- endif %}
          {%- if updated %}
            <div class="kimMeta_item">
              <dt class="kimMeta_key">Last updated</dt>
              <dd class="kimMeta_value">
                <time datetime="{{ updated | formatDate('iso') }}" itemprop="dateModified">
                  {{- updated | formatDate('human') -}}
                </time>
              </dd>
            </div>
          {%- endif %}
        </dl>
        {%- endif %}
      
        {%- if preTitle %}
        <div class="kimSubheading-l">{{ preTitle | markdownInline | safe }}</div>
        {%- endif %}
        <h1 class="kimHeading-xl">
          {{- title | markdownInline | safe -}}
        </h1>
      </header>
      
      {%- set toc = getTableOfContents(content) %}
      {%- if toc | length > 0%}
        <div class="pageGeneric_toc">
          {% include "table-of-contents.njk" %}
        </div>
      {%- endif %}
      
      <div class="pageGeneric_body">
        {% block content %}
          {{ content | safe }}
        {% endblock %}
      </div>
    </article>
  </div>
{% endblock %}

{% css %}
.pageGeneric {
  display: grid;
  column-gap: var(--grid-gutter);
  grid-template-columns: 1fr;
  grid-template-areas: "header" "toc" "body";
  margin-block: var(--space-8-9);
}

@media (min-width: 52rem) {
  .pageGeneric {
    grid-template-columns: 2fr 1fr;
    grid-template-rows: auto 1fr;
    grid-template-areas: "header ." "body toc"; 
  }
}

.pageGeneric_header {
  grid-area: header;
  margin-block-end: var(--space-6-7);
}

.pageGeneric_toc,
.pageGeneric_body {
  margin-block-end: var(--space-6-7);
  padding-block-start: var(--space-5);
  border-block-start: var(--border-regular) solid var(--color-furniture);
}

.pageGeneric_toc {
  grid-area: toc;
}

.pageGeneric_body {
  grid-area: body;
}

.pageGeneric_body > :last-child {
  margin-block-end: 0;
}
{% endcss %}